# Cấu hình Backup cho Windows VPS
# Backup Configuration for Windows VPS System

# General backup settings
BACKUP_ENABLED=true
BACKUP_VERSION="2.0.0"
BACKUP_DESCRIPTION="Enhanced backup system with multiple methods"

# Compression settings
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
COMPRESSION_FORMAT="tar.gz"

# Retention policy
RETENTION_DAYS=30
MAX_LOCAL_BACKUPS=5
AUTO_CLEANUP=true

# Backup methods (priority order)
PRIMARY_METHOD="github_releases"
FALLBACK_METHOD="transfer_sh"
LOCAL_METHOD="local_storage"

# GitHub Releases backup
GITHUB_BACKUP_ENABLED=true
GITHUB_REPO_OWNER=""  # Will be set automatically
GITHUB_REPO_NAME=""   # Will be set automatically
GITHUB_TOKEN=""       # Will be set from secrets
GITHUB_RELEASE_TAG_PREFIX="backup-"
GITHUB_RELEASE_DRAFT=false
GITHUB_RELEASE_PRERELEASE=true

# Transfer.sh backup
TRANSFER_BACKUP_ENABLED=true
TRANSFER_URL="https://transfer.sh"
TRANSFER_MAX_DAYS=14
TRANSFER_MAX_DOWNLOADS=10

# Local backup
LOCAL_BACKUP_ENABLED=true
LOCAL_BACKUP_DIR="backups"
LOCAL_BACKUP_PREFIX="vps-backup"
LOCAL_BACKUP_TIMESTAMP_FORMAT="%Y%m%d-%H%M%S"

# Paths to include in backup
BACKUP_INCLUDE_PATHS=(
    "TASTRVPS/"
    "logs/"
    "templates/"
    "docs/"
    ".github/workflows/"
    "README.md"
    "LICENSE"
)

# Patterns to exclude from backup
BACKUP_EXCLUDE_PATTERNS=(
    "*.tmp"
    "*.temp"
    "*.log"
    "*.cache"
    "node_modules/"
    ".git/"
    ".github/workflows/cache/"
    "backups/*.tar.gz"
    "logs/*.log"
)

# File size limits
MAX_BACKUP_SIZE_MB=100
MAX_SINGLE_FILE_SIZE_MB=50
WARN_BACKUP_SIZE_MB=50

# Backup verification
VERIFY_BACKUP=true
VERIFY_COMPRESSION=true
VERIFY_INTEGRITY=true
CHECKSUM_ALGORITHM="sha256"

# Notification settings
NOTIFY_SUCCESS=true
NOTIFY_FAILURE=true
NOTIFY_WARNINGS=true

# Logging
LOG_BACKUP_OPERATIONS=true
LOG_LEVEL="INFO"
LOG_FILE="logs/vps-backup.log"
LOG_MAX_SIZE_MB=10
LOG_ROTATION=true

# Recovery settings
RECOVERY_ENABLED=true
RECOVERY_VERIFY_BEFORE_RESTORE=true
RECOVERY_BACKUP_BEFORE_RESTORE=true
RECOVERY_TIMEOUT_MINUTES=30

# Advanced settings
PARALLEL_COMPRESSION=true
COMPRESSION_THREADS=2
NETWORK_TIMEOUT_SECONDS=300
RETRY_COUNT=3
RETRY_DELAY_SECONDS=5

# Security settings
ENCRYPT_BACKUP=false
ENCRYPTION_ALGORITHM="AES256"
SECURE_DELETE_TEMP=true

# Monitoring and health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_BEFORE_BACKUP=true
HEALTH_CHECK_AFTER_BACKUP=true
HEALTH_CHECK_DISK_SPACE=true
MIN_FREE_DISK_SPACE_MB=1000

# Auto-backup triggers
AUTO_BACKUP_ON_START=false
AUTO_BACKUP_ON_SHUTDOWN=true
AUTO_BACKUP_INTERVAL_HOURS=0  # 0 = disabled
AUTO_BACKUP_ON_CHANGES=false

# Backup metadata
BACKUP_METADATA_ENABLED=true
BACKUP_METADATA_INCLUDE_SYSTEM_INFO=true
BACKUP_METADATA_INCLUDE_TIMESTAMP=true
BACKUP_METADATA_INCLUDE_SIZE=true
BACKUP_METADATA_INCLUDE_CHECKSUM=true

# Emergency backup settings
EMERGENCY_BACKUP_ENABLED=true
EMERGENCY_BACKUP_TRIGGER_DISK_SPACE_MB=500
EMERGENCY_BACKUP_TRIGGER_MEMORY_PERCENT=90
EMERGENCY_BACKUP_QUICK_MODE=true

# Integration settings
GITHUB_ACTIONS_INTEGRATION=true
WORKFLOW_DISPATCH_INTEGRATION=true
REPOSITORY_DISPATCH_INTEGRATION=true

# Debug and development
DEBUG_MODE=false
VERBOSE_OUTPUT=false
DRY_RUN_MODE=false
BACKUP_TESTING_MODE=false

# Performance tuning
IO_NICE_LEVEL=3
CPU_NICE_LEVEL=10
BACKGROUND_PROCESSING=true
LOW_PRIORITY_MODE=true

# Compatibility settings
WINDOWS_COMPATIBILITY=true
LINUX_COMPATIBILITY=true
MACOS_COMPATIBILITY=false
CROSS_PLATFORM_PATHS=true

# Version information
CONFIG_VERSION="2.0.0"
LAST_UPDATED="2025-01-14"
CREATED_BY="Windows VPS Auto Setup"
COMPATIBLE_VERSIONS=">=2.0.0"
